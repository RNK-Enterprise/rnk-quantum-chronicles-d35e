// @ts-nocheck
const{ApplicationV2:ApplicationV2,HandlebarsApplicationMixin:HandlebarsApplicationMixin}=foundry.applications.api,SYSTEM_ID="rnk-quantum-d35e";export class QuantumConfig extends(HandlebarsApplicationMixin(ApplicationV2)){static DEFAULT_OPTIONS={id:"quantum-config",tag:"form",classes:["quantum-config-dialog"],window:{title:"Quantum Chronicles â€” Core Configuration",icon:"fas fa-atom",resizable:!0,minimizable:!0},position:{width:1050,height:700},form:{closeOnSubmit:!0,handler:QuantumConfig.#e}};static PARTS={main:{template:"systems/rnk-quantum-d35e/templates/settings/config-main.hbs"}};constructor(e={}){super(e),this.activeTab="general"}async _preparePartContext(e,t,i){if(t=await super._preparePartContext(e,t,i),"main"===e)switch(t.tabs=[{id:"general",label:"General Settings",icon:"fas fa-cog"},{id:"mechanics",label:"Vortex Rules",icon:"fas fa-dna"},{id:"debug",label:"Debug Options",icon:"fas fa-bug"}],t.activeTab=this.activeTab,this.activeTab){case"general":t.fields=[this.createSettingField("quantumChaos"),this.createSettingField("maintenanceEnabled")],t.legend="General Settings",t.icon="fas fa-cog";break;case"mechanics":t.fields=[this.createSettingField("vortexInitiative")],t.legend="Vortex Initiative Rules",t.icon="fas fa-dna";break;case"debug":t.fields=[this.createSettingField("debugMode")],t.legend="Debug Logging",t.icon="fas fa-bug"}return t}_onRender(e,t){super._onRender(e,t);const i=this.element;i&&i.querySelectorAll(".quantum-tab").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),this.activeTab=e.dataset.tab,this.render()})})}createSettingField(e){const t=game.settings.settings.get(`${SYSTEM_ID}.${e}`);if(!t)throw new Error(`Setting \`${SYSTEM_ID}.${e}\` not registered.`);const i=game.settings.get(SYSTEM_ID,e);return{name:e,label:game.i18n.localize(t.name),hint:game.i18n.localize(t.hint||""),value:i,type:t.type===Boolean?"boolean":t.type===Number?"number":(t.type,"string")}}static async#e(e,t,i){let n=!1,a=!1;const s=foundry.utils.expandObject(i.object);for(const[e,t]of Object.entries(s)){const i=game.settings.settings.get(`${SYSTEM_ID}.${e}`);if(!i)continue;let s=t;i.type===Boolean?s="on"===t||!0===t||"true"===t:i.type===Number&&(s=parseFloat(t)),await game.settings.set(SYSTEM_ID,e,s),n||="world"!==i.scope&&i.requiresReload,a||="world"===i.scope&&i.requiresReload}if(ui.notifications.info("Quantum State Synchronized."),n||a)return SettingsConfig.reloadConfirm({world:a})}}