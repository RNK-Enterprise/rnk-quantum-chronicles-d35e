// @ts-nocheck
export const CharacterRaces={dwarf:{name:"Dwarf",abilityMods:{str:0,dex:-2,con:2,int:0,wis:0,cha:-2},speed:20,size:"medium",favoritedWeapon:"battleaxe",languages:["Common","Dwarven"]},elf:{name:"Elf",abilityMods:{str:-2,dex:2,con:0,int:0,wis:0,cha:0},speed:30,size:"medium",favoritedWeapon:"longsword",languages:["Common","Elvish"]},gnome:{name:"Gnome",abilityMods:{str:-2,dex:0,con:2,int:0,wis:0,cha:0},speed:20,size:"small",favoritedWeapon:"dagger",languages:["Common","Gnome"]},halfelf:{name:"Half-Elf",abilityMods:{str:0,dex:0,con:0,int:0,wis:0,cha:2},speed:30,size:"medium",favoritedWeapon:"longsword",languages:["Common","Elvish"]},halfling:{name:"Halfling",abilityMods:{str:-2,dex:2,con:0,int:0,wis:0,cha:0},speed:20,size:"small",favoritedWeapon:"dagger",languages:["Common","Halfling"]},halforc:{name:"Half-Orc",abilityMods:{str:2,dex:0,con:0,int:-2,wis:0,cha:-2},speed:30,size:"medium",favoritedWeapon:"greataxe",languages:["Common","Orc"]},human:{name:"Human",abilityMods:{str:0,dex:0,con:0,int:0,wis:0,cha:0},speed:30,size:"medium",favoritedWeapon:"sword",languages:["Common"]}};export const CharacterClasses={barbarian:{name:"Barbarian",hitDice:12,baseAttackProgression:"full",savingThrows:{fort:"good",ref:"poor",will:"poor"},skillPoints:4,primaryAbility:"str"},bard:{name:"Bard",hitDice:8,baseAttackProgression:"medium",savingThrows:{fort:"poor",ref:"good",will:"good"},skillPoints:6,primaryAbility:"cha"},cleric:{name:"Cleric",hitDice:8,baseAttackProgression:"medium",savingThrows:{fort:"good",ref:"poor",will:"good"},skillPoints:2,primaryAbility:"wis"},druid:{name:"Druid",hitDice:8,baseAttackProgression:"medium",savingThrows:{fort:"good",ref:"poor",will:"good"},skillPoints:4,primaryAbility:"wis"},fighter:{name:"Fighter",hitDice:10,baseAttackProgression:"full",savingThrows:{fort:"good",ref:"poor",will:"poor"},skillPoints:2,primaryAbility:"str"},monk:{name:"Monk",hitDice:8,baseAttackProgression:"full",savingThrows:{fort:"good",ref:"good",will:"good"},skillPoints:4,primaryAbility:"dex"},paladin:{name:"Paladin",hitDice:10,baseAttackProgression:"full",savingThrows:{fort:"good",ref:"poor",will:"good"},skillPoints:2,primaryAbility:"str"},ranger:{name:"Ranger",hitDice:10,baseAttackProgression:"full",savingThrows:{fort:"good",ref:"good",will:"poor"},skillPoints:6,primaryAbility:"dex"},rogue:{name:"Rogue",hitDice:6,baseAttackProgression:"medium",savingThrows:{fort:"poor",ref:"good",will:"poor"},skillPoints:8,primaryAbility:"dex"},sorcerer:{name:"Sorcerer",hitDice:6,baseAttackProgression:"poor",savingThrows:{fort:"poor",ref:"poor",will:"good"},skillPoints:2,primaryAbility:"cha"},wizard:{name:"Wizard",hitDice:6,baseAttackProgression:"poor",savingThrows:{fort:"poor",ref:"poor",will:"good"},skillPoints:2,primaryAbility:"int"}};export class CharacterCreationHelper{constructor(s){this.actor=s}applyRace(s){const o=CharacterRaces[s];if(!o)return console.warn(`Unknown race: ${s}`),!1;this.actor.system.details.race=o.name;for(const[s,i]of Object.entries(o.abilityMods))this.actor.system.abilities[s]&&(this.actor.system.abilities[s].value+=i);return o.speed&&(this.actor.system.attributes.speed.land=o.speed),this.actor.system.traits.size=o.size,!0}applyClass(s,o=1){const i=CharacterClasses[s];if(!i)return console.warn(`Unknown class: ${s}`),!1;this.actor.system.details.class=i.name,this.actor.system.details.level.value=o;const e=this.calculateBAB(i,o);this.actor.system.attributes.bab=e,this.calculateSavingThrows(i,o);const a=this.actor.system.abilities.int.mod>0?this.actor.system.abilities.int.mod*o:0,t=(i.skillPoints+3)*o+a+4;return this.actor.system.details.skillPoints=t,!0}calculateBAB(s,o){let i=0;switch(s.baseAttackProgression){case"full":i=o;break;case"medium":i=Math.floor(3*o/4);break;case"poor":i=Math.floor(o/2)}return i}calculateSavingThrows(s,o){const i=Math.floor(o/2)+2,e=Math.floor(o/3),a=this.actor.system.attributes.saves;for(const[o,t]of Object.entries(s.savingThrows)){const s="good"===t;a[o].base=s?i:e}}applyAbilityScoreArray(s=null){const o=s||[15,14,13,12,10,8];return 6!==o.length?(console.warn("Ability score array must have 6 values"),!1):(["str","dex","con","int","wis","cha"].forEach((s,i)=>{this.actor.system.abilities[s].value=o[i]}),!0)}applyPointBuy(s=25){return["str","dex","con","int","wis","cha"].forEach(s=>{this.actor.system.abilities[s].value=10}),{pointsTotal:s,costs:{8:-2,9:-1,10:0,11:1,12:2,13:3,14:5,15:7},message:"Distribute points using the point buy system. Each ability starts at 10."}}calculateHP(s=null){const o=this.actor.system.details.level.value||1,i=this.actor.system.details.class.toLowerCase(),e=CharacterClasses[i];if(!e&&!s)return console.warn(`Class ${i} not found`),0;const a=s||e.hitDice,t=this.actor.system.abilities.con.mod||0;let r=a+t;for(let s=2;s<=o;s++)r+=Math.floor(a/2)+1+t;return r=Math.max(r,o),r}}